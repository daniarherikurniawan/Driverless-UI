<!DOCTYPE html>
<html lang="en" style="overflow: hidden;">
<head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta charset="utf-8">
  <title>StudyLounge</title>
  <meta name="generator" content="Bootply" />
  <link href="../stylesheets/bootstrap.min.css" rel="stylesheet"> 
  <link href="../stylesheets/font-awesome.min.css" rel="stylesheet"> 
		<!--[if lt IE 9]>
			<script src="//html5shim.googlecode.com/svn/trunk/html5.js"></script>
      <![endif]-->
      <link href="../stylesheets/styles.css" rel="stylesheet">
      <link rel="shortcut icon" type="image/png" href="../images/logo.gif"/>
      <script src="../javascripts/jquery/jquery.min.js"></script>
      <script src="../javascripts/socket.io/socket.io.js"></script>
      <script src="../javascripts/bootstrap/bootstrap.min.js"></script>
    </head>


    <body onload="showComments('<%posts._id%>')">
      <div class="wrapper">
        <div class="box">
          <div class="row row-offcanvas row-offcanvas-left">


            <!-- main right col -->
            <div class="column col-sm-12 col-xs-11" id="main" style="margin-top: 50px; width: 100%; height:92%">
              <!-- top nav -->
              <div class="navbar navbar-blue navbar-static-top">  
                <%> topNavigation%>
              </div>
              <!-- /top nav -->

              <div class="padding" style="    padding-top: 15px;">
                <div class="full col-sm-9" style="padding-top:0px">

                  <!-- content -->                      
                  <div class="row">


                   <!-- main col right -->
                   <div class="" style="padding-left:0px; padding-right:0px; margin:auto; width: 640px;">

                  <%# posts %>

                  <div class="panel panel-default" style="" id="<%_id%>" >
                    <div class="row" id="<%_id%>row">

                      <div class="col-sm-2" style=" padding-left: 0px;">
                       <div class="panel-heading" id="<%_id%>theImage">
                        <a href="/profile/<%creator.email%>"  class="pull-left">   
                          <%^myPost%>
                          <div class="col-sm-1"  id="<%creator._id%>editableImage" style="padding: 0 0 0 0 ; width:90px;height:90px;overflow:hidden; margin: 3px 10px 0px 0px">
                            <%/myPost%>

                          <%#myPost%>
                          <div class="col-sm-1"  id="<%_id%>editableImage" style="padding: 0 0 0 0 ; width:90px;height:90px;overflow:hidden; margin: 3px 10px 0px 0px">
                              <%/myPost%>

                              <img style=" width:90px; position: absolute;left: 50%; top: 50%; -webkit-transform: translateY(-50%) translateX(-50%);  -moz-transform: translateY(-50%) translateX(-50%) ;"src="/images/<%creator.email%>/profile/<%creator.img_profile_name%>">
                            </div>

                          </a> 
                        </div>
                      </div>

                      <div class="col-sm-10" style="margin-top: 10px;">
                        <div class="row">
                          <div class="col-sm-11" style="padding-left:0px">
                            <%^myPost%>
                            <a href="/profile/<%creator.email%>"><h4 style="margin-bottom: 0px;" id="<%creator._id%>editableName"><b >
                              <%creator.name%>
                              <%/myPost%>

                              <%#myPost%>

                              <a href="/profile/<%profile.email%>"><h4 style="margin-bottom: 0px;" id="<%_id%>editableName"><b> 
                                <%profile.name%>
                                <%/myPost%>
                              </b></h4> </a>

                            </div>
                            <div class="col-sm-1 " style="margin-top: 8px;padding-right: 0px;padding-left: 27px;">

                              <li class="dropdown" style="list-style-type: none;">
                                <a href="" data-toggle="dropdown"><i class="glyphicon glyphicon-chevron-down" style="top:-3px"></i></a>
                                <ul class="dropdown-menu" style="left:-101px; top:13px;    min-width: 120px; ">

                                  <%#myPost%>
                                  <li><a class="btn " style="text-align: left;"  type="button" onclick="editPost('<%_id%>','<%profile._id%>')"><i class="glyphicon glyphicon-pencil "></i>&nbsp; Edit</a></li>
                                  <%/myPost%>
                                  <li><a class="btn" style="text-align: left;" type="button" href=""><i class="glyphicon glyphicon-bookmark "></i>&nbsp; Keep</a></li>
                                  <%^myPost%>
                                  <li><a class="btn" style="text-align: left;" type="button" href=""><i class="fa fa-share "></i>&nbsp; Share</a></li>
                                  <%/myPost%>

                                  <%#myPost%>
                                  <li>
                                   <a class="btn" style="text-align: left;" type="button" onclick="tryToDelete('<%_id%>','<%profile._id%>')"><i class="glyphicon glyphicon-remove "></i>&nbsp; Delete</a></li>
                                   <%/myPost%>
                                 </ul>
                               </li>
                             </div>
                           </div>
                           <%#title%>
                           <h5  >Title: <a id = "<%_id%>editableTitle" href="/post/<%_id%>"> <b><%title%></b>   <!-- [poin: <%post_index%>] --> </a> </h5>
                           <%#keywords%>
                           <hr style="margin:5px 0px 5px 0px">
                           Keywords: <a href="#"  id = "<%_id%>editableKeywords"><%keywords%></a>
                           <%/keywords%>
                           <%/title%>

                           <%^title%>
                           <h5 style="" > shared <a href="/profile/<%original_creator.email%>"><b >
                              <%original_creator.name%><%^original_creator.name%><%profile.name%><%/original_creator.name%>
                              </b></a>'s post
                              </h5> 
                           <hr style="margin:5px 0px 5px 0px">
                           Keywords: <a href="#"  ><%post_shared.keywords%></a>
                           <%/title%>
                         </div>

                       </div> <!-- row -->

                       <div class="panel-body" style="padding:10px 15px 15px 15px">
                         <p style="word-wrap: break-word;    white-space: normal; " id = "<%_id%>editableContent"><%content%></p>







              <%^title%>


                  <div class="panel panel-default" style="margin-bottom:10px"  >
                    <div class="row">

                      <div class="col-sm-1" style=" padding-left: 0px; margin-right:10px">
                       <div class="panel-heading" >
                        <a href="/profile/<%original_creator.email%><%^original_creator.name%><%profile.email%><%/original_creator.name%>"  class="pull-left">   
                          <div class="col-sm-1"  style="padding: 0 0 0 0 ; width:50px;height:50px;overflow:hidden; margin: 0px 10px 0px 0px">
                              <img style=" width:50px; position: absolute;left: 50%; top: 50%; -webkit-transform: translateY(-50%) translateX(-50%);  -moz-transform: translateY(-50%) translateX(-50%) ;"src="/images/<%original_creator.email%><%^original_creator.name%><%profile.email%><%/original_creator.name%>/profile/<%original_creator.img_profile_name%><%^original_creator.name%><%profile.img_profile_name%><%/original_creator.name%>">
                            </div>

                          </a> 
                        </div>
                      </div>
                      <div class="col-sm-10" style="margin-top: 5px;">
                        <div class="row">
                           <h5 >Title: <a href="/post/<%post_shared._id%>"><b><%post_shared.title%></b></a></h5>
                          </div>


                          <div class="input-group" style="margin-right:-42px; margin-top: -9px;">
                          <div class="input-group-btn" style="font-size:10px">
                            <a type="button" class="btn btn-default" style="padding: 4px 5px 4px 0px;     border-color: transparent;"><i    class="fa fa-share">&nbsp; <%post_shared.share.length%></i></a>
                            <a type="button" class="btn btn-default" style="padding: 4px 5px 4px 5px;     border-color: transparent;"><i class="fa fa-thumbs-up">&nbsp; <%post_shared.like.length%> </i></a>
                            <a type="button" class="btn btn-default" style="padding: 4px 5px 4px 5px;     border-color: transparent;"><i  class="fa fa-comments-o">&nbsp; <%post_shared.comments.length%></i></a>
                          </div>
                          <div class="pull-right" style="width: 100%">       
                            <%^myPost%>
                            <%#original_creator%>
                            <a type="button" onclick="<%^post_shared.shared%>initiateSharedThought('<%post_shared._id%>','<%original_creator._id%>'); init('additionalThought',200);<%/post_shared.shared%>"  data-toggle="modal" class="btn btn-default" href="<%^post_shared.shared%>#shareModal<%/post_shared.shared%>"  style="float: right;"><i id="iconShare<%_id%>"  style="<%#post_shared.shared%>color:rgb(45, 99, 99)<%/post_shared.shared%>"  class="fa fa-share"></i></a>
                            <%/original_creator%>
                            <%/myPost%>
                          </div>
                        </div>

                         </div>

                       </div> <!-- row -->

                       <div class="panel-body" style="padding:0px 15px 5px 15px">
                         <span style="word-wrap: break-word;    white-space: normal; " ><%post_shared.content%></span>

                      
                      </div>
              </div>


              <%/title%>

                         <div class="input-group">
                          <div class="input-group-btn">
                          <%#title%>
                            <a type="button" id="buttonShare<%_id%>" onclick="showShares('<%_id%>')"  class="btn btn-default" style="padding: 4px 5px 4px 5px;     border-color: transparent;"><i id="share<%_id%>"  class="fa fa-share">&nbsp; <%share.length%></i></a>
                          <%/title%>
                            <a type="button" id="buttonLike<%_id%>" onclick="showLikes('<%_id%>')"  class="btn btn-default" style="padding: 4px 5px 4px 5px;     border-color: transparent;"><i id="like<%_id%>"  class="fa fa-thumbs-up">&nbsp; <%like.length%> </i></a>
                            <a type="button" id="button<%_id%>" onclick="showComments('<%_id%>')" class="btn btn-default" style="padding: 4px 5px 4px 5px;     border-color: transparent;"><i  id="comment<%_id%>" class="fa fa-comments-o">&nbsp; <%comments.length%></i></a>
                          </div>

                          <div class="pull-right" style="width: 100%">
                            <input onclick ="init('baby')" type="text" name="<%_id%>" id="comment" style="float: right;margin-left:0px;width: 80%;"  class="form-control comment" placeholder="Give a quick comment.. (Press 'enter' when finished)">

                            <a type="button" class="btn btn-default" onclick="sendLike('<%_id%>')" style="float: right; " ><i id ="iconLike<%_id%>" style="<%#liked%>color:rgb(45, 99, 99)<%/liked%>" class="fa fa-thumbs-up"></i></a>
                            <!-- onclick="sendShare('<%_id%>')" -->
                            <%^myPost%>      
                            <%#title%>            
                            <a type="button" onclick="<%^shared%>initiateSharedThought('<%_id%>','<%creator._id%>'); init('additionalThought',200);<%/shared%>"  data-toggle="modal" class="btn btn-default" href="<%^shared%>#shareModal<%/shared%>"  style="float: right;"><i id="iconShare<%_id%>"  style="<%#shared%>color:rgb(45, 99, 99)<%/shared%>"  class="fa fa-share"></i></a>
                            <%/title%>
                            <%/myPost%>
                          </div>

                        </div>
                      </div>
                      <div id="showComment<%_id%>">
                </div>
              </div>

              <%/ posts %>

            </div>

            <div class="column col-sm-3 col-xs-1 " style="position:fixed;left:73%">
            </div>

          </div><!--/row-->


          <h4 class="text-center">
            <!-- <a href="" target="ext">©Copyright 2015</a> -->
          </h4>

        </div><!-- /col-9 -->


      </div><!-- /padding -->
    </div>
    <!-- /main -->

  </div>
</div>
</div>




<!--share modal-->
<div id="shareModal" class="modal fade" tabindex="-1" role="dialog" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
        <h4> Share a Post </h4>
      </div>
      <form onsubmit="return tryToShare()" id="editableShareFunction" class="form center-block">
        <div class="modal-body">
          <div class="form-group">
            <textarea  id="additionalThought" style="word-wrap: break-word;white-space: normal;" class=" auto-resize form-control input-lg" autofocus="" placeholder="What is your thought about this post?" required=""></textarea>

          </div>

          <!-- shared post -->
          <div class="panel panel-default" style="margin-bottom:0px" id="sss" >
            <div class="row" id="row">

              <div class="col-sm-2" style=" padding-left: 0px;">
               <div class="panel-heading" >

                   <a id="linkSharedImage" href="sapai"  class="pull-left">   
                  <div class="col-sm-1"  style="padding: 0 0 0 0 ; width:90px;height:90px;overflow:hidden; margin: 3px 10px 0px 0px">

                      <img id="sourceSharedImage" style=" width:90px; position: absolute;left: 50%; top: 50%; -webkit-transform: translateY(-50%) translateX(-50%);  -moz-transform: translateY(-50%) translateX(-50%) ;"src="">
                    </div>
                  </a> 

               </div>
             </div>

             <div class="col-sm-10" style="margin-top: 7px;">
              <div class="row">
                <div class="col-sm-11" style="padding-left:0px">
                  <h4 style="margin-bottom: 0px;" id="sharedName"><b >fnkernfek
                  </b></h4>

                </div>
              </div>

              <h4  id = "sharedTitle">salah  </h4>
              <hr style="margin:5px 0px 5px 0px">
              Keywords: <a href="#"  id = "sharedKeywords"><%keywords%></a>
            </div>

          </div> <!-- row -->

          <div class="auto-resize panel-body" style="word-wrap: break-word;    white-space: normal;padding:10px 15px 0px 15px">
           <p id = "sharedContent">salah</p>


         </div>
       </div>
       <!-- shared post -->


     </div>
     <div class="modal-footer">
      <div>
       <button class=" btn btn-md btn-primary" type="submit">Share</button>

        <ul class="pull-left list-inline"><li><a href=""><i class="glyphicon glyphicon-upload"></i></a></li><li><a href=""><i class="glyphicon glyphicon-camera"></i></a></li><li><a href=""><i class="glyphicon glyphicon-map-marker"></i></a></li></ul>
      </div>	
    </div>
  </form>
</div>
</div>
</div>


<!-- Modal untuk edit post -->

<div class="panel panel-default modal fade" id="templateEdit" aria-hidden="true" >
  <form id="needAction" action="/updatePost" method="post">
    <div class="row">
      <div class="col-sm-2" style=" padding-left: 0px;">
       <div class="panel-heading">
        <a href="/" class="pull-left">    
          <div class="col-sm-1" id="editableImage" style="padding: 0 0 0 0 ; width:90px;height:90px;overflow:hidden; margin: 3px 10px 0px 0px">
           <img style=" width:90px; position: absolute;left: 50%; top: 50%; -webkit-transform: translateY(-50%) translateX(-50%);  -moz-transform: translateY(-50%) translateX(-50%) ;"src="">
         </div>
       </a> 
     </div>
   </div>
   <div class="col-sm-10" style="margin-top: 7px;">

    <h4 style="margin-bottom: 0px;" id = "editableName" ><b>
      Paijo  </b></h4> 
      <textarea id = "editableTitle" class="form-control" name="title" style="height: 35px; margin: 3px 0px 3px 0px;"placeholder="Title" required>title</textarea>
      <textarea id = "editableKeywords" class="form-control pull-left" name="keywords" style="height: 35px; margin left: -15px; "placeholder="Keywords" required>Keywords</textarea>
    </div>
  </div> <!-- row -->
  <div class="panel-body" style="padding:3px 15px 15px 15px">
    <div class="form-group" style="padding:0px 0px 4px 0px;; margin-bottom:5px ">
      <textarea  id = "editableContent"  name="content" class="form-control auto-resize" placeholder="Share your knowledge"  required rows="2" style="height:1em;" ></textarea>
    </div>



    <div class="pull-right">
      <a id="targetId" onclick="cancelEditPost()" class="btn btn-md btn-default" type="">Cancel
      </a> &nbsp;  
      <button class=" btn btn-md btn-primary" type="submit">Save</button>
    </div>
  </div>
</form>
</div>


</body>
</html>

<script type="text/javascript">
  var id_creator = '<%profile._id%>';
  var myEmail = '<%profile.email%>'
</script>
<!-- script references -->
<script src="../javascripts/page_scripting/post/post_script.js"></script>

